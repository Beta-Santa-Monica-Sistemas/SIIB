@model IEnumerable<Beta_System.Models.C_inventario_almacen_mov_d>

@{
    var inventario = Model.FirstOrDefault().C_inventario_almacen_mov_g;

}

@if (inventario.id_inventario_mov_tipo == 1002)
{
    <h2 style="color: @inventario.C_inventario_mov_tipos.color">@inventario.C_inventario_mov_tipos.nombre_mov</h2>
    <hr />

    <h4><strong>Origen del traspaso: @inventario.C_almacen_almacenes_g.nombre_almacen</strong></h4>
    <div class="table-responsive" style="height: 250px; min-height:250px;">
        <table class="table table-striped table-bordered" style="width:100%;">
            <thead>
                <tr class="bg-beta text-center">
                    <th>Almacén</th>
                    <th>Clave art.</th>
                    <th>Artículo</th>
                    <th>Cantidad</th>
                    <th>Observaciones</th>
                    <th>Estatus</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr class="text-center">
                        <td>@item.C_inventario_almacen_mov_g.C_almacen_almacenes_g.nombre_almacen</td>
                        <td><strong>@item.C_articulos_catalogo.clave</strong></td>
                        <td>@item.C_articulos_catalogo.nombre_articulo</td>
                        <td>@string.Format("{0:0.00}", @item.cantidad)</td>
                        <td>@item.observaciones</td>
                        <td><button class="btn" style="background-color:@item.C_inventario_mov_status.color; color:white;">@item.C_inventario_mov_status.nombre_status</button></td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <hr />
    <h4><strong>Destino del traspaso: @inventario.C_almacen_almacenes_g1.nombre_almacen</strong></h4>
    <div class="table-responsive" style="height: 250px; min-height:250px;">
        <table class="table table-striped table-bordered" style="width:100%;">
            <thead>
                <tr class="bg-beta text-center">
                    <th>Almacén</th>
                    <th>Clave art.</th>
                    <th>Artículo</th>
                    <th>Cantidad</th>
                    <th>Observaciones</th>
                    <th>Estatus</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr class="text-center">
                        <td>@item.C_inventario_almacen_mov_g.C_almacen_almacenes_g1.nombre_almacen</td>
                        <td><strong>@item.C_articulos_catalogo.clave</strong></td>
                        <td>@item.C_articulos_catalogo.nombre_articulo</td>
                        <td>@string.Format("{0:0.00}", @item.cantidad)</td>
                        <td>@item.observaciones</td>
                        <td><button class="btn" style="background-color:@item.C_inventario_mov_status.color; color:white;">@item.C_inventario_mov_status.nombre_status</button></td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
}

else
{
    <h1 class="bg-beta text-center">Almacén: @inventario.C_almacen_almacenes_g.nombre_almacen</h1>
    
    <div class="row">
        <div class="col-md-4">
            <h2 style="color: @inventario.C_inventario_mov_tipos.color">@inventario.C_inventario_mov_tipos.nombre_mov</h2>
        </div>
        @if (inventario.id_inventario_mov_tipo == 1)
        {
            if (inventario.C_inventario_almacen_mov_d_recepciones_logs.Count() > 0)
            {
                <div class="col-md-4 text-center bg-primary">
                    <h3 class="text-white" style="margin-top:3px; cursor:default;">Orden de compra: @inventario.id_transaccion_orden_g</h3>

                </div>
                <div class="col-md-4 text-center bg-info">
                    <h3 class="text-white" style="margin-top: 3px; cursor: default;">Remisión/Factura: @inventario.folio_remi_fact</h3>
                </div>
            }
        }
    </div>
   
    <div class="table-responsive">
        <table id="tabla_movimientos_inventario_detalle" class="table table-striped table-bordered" style="width:100%;">
            <thead>
                <tr class="bg-beta text-center">
                    <th>Almacén</th>
                    <th>Clave art.</th>
                    <th>Artículo</th>
                    <th>Cantidad</th>
                    <th>Fecha</th>
                    <th>Observaciones</th>
                    @*<th>Factura/Remisión</th>*@
                    <th>Estatus</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr class="text-center">
                        <td>@item.C_almacen_almacenes_g.nombre_almacen</td>
                        <td><strong>@item.C_articulos_catalogo.clave</strong></td>
                        <td>@item.C_articulos_catalogo.nombre_articulo</td>
                        <td>@string.Format("{0:0.00}", @item.cantidad)</td>
                        <td>@string.Format(item.fecha_registro.ToString(), "dd/mm/yyyy")</td>
                        <td>@item.observaciones</td>
                        @*<td>
                                @try
                                {
                                    <strong>@item.C_inventario_almacen_mov_d_recepciones_logs.FirstOrDefault().folio_remision_factura</strong>
                                }
                                catch (Exception)
                                {

                                }
                            </td>*@
                        <td><button class="btn" style="background-color:@item.C_inventario_mov_status.color; color:white;">@item.C_inventario_mov_status.nombre_status</button></td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
}

@if (inventario.id_inventario_mov_tipo == 1002 && inventario.id_inventario_mov_status == 1)
{
    <button class="btn btn_beta" style="display:none;" id="btn_recibir_traspaso" onclick="RecibirTraspasoInventario(@inventario.id_inventario_almacen_mov_g);">Recibir</button>
}

<script>ValidarRecepcionTraspaso(@inventario.id_almacen_destino);</script>



