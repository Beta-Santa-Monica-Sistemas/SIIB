@model IEnumerable<Beta_System.Models.C_compras_ordenes_d>
@{
    var contador = 0;
}


@if (Model != null && Model.Count() > 0)
{
    <table class="table table-striped table-bordered text-center" id="tabla_orden_g" style="width:100%">
        <thead>
            <tr class="bg-beta">
                <th></th>
                <th>#</th>
                <th>Articulo</th>
                <th>Solicita</th>
                <th>Entrega</th>
                <th>Pendiente</th>
                <th>Precargado</th>
                <th>Recibe</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                var id_articulo = @item.id_articulo + "_" + @contador;
                <tr>
                    @if (item.C_articulos_catalogo.almacenable == true)
                    {
                        <td><input id="check_@item.id_compras_orden_d" type="checkbox" class="form-control check_entrega_articulo" style="min-height: 25px; width: 100%;" onclick="ActivarEntrega(@item.id_compras_orden_d);" /></td>
                    }
                    else
                    {
                        <td style="color: red"><i class="fa fa-times"></i></td>
                    }
                    <td id="@item.id_compras_orden_d" class="orden_articuloD" style="">@item.id_compras_orden_d</td>
                    <td id="@id_articulo" class="orden_articulo">@item.C_articulos_catalogo.nombre_articulo</td>
                    <td id="cant_solicita_@item.id_compras_orden_d">@string.Format("{0:0.00}", @item.cantidad_compra)</td>
                    <td id="cant_entrega_@item.id_compras_orden_d">@string.Format("{0:0.00}", @item.cantidad_entregada)</td>
                    @{
                        var pendiente = @item.cantidad_compra - @item.cantidad_entregada;
                    }
                    <td>@string.Format("{0:0.00}", pendiente)</td>
                    <td id="cant_precarga_@item.id_compras_orden_d">@string.Format("{0:0.00}", @item.cantidad_precarga)</td>
                    <td>
                        <input onkeypress="return isNumberOrDecimalKey(event)" type="text" id="cant_recibido_@item.id_compras_orden_d" class="orden_recibido solo-numeros form-control" onkeyup="ValidarEntregaArticuloEntrega(@item.id_compras_orden_d)" disabled />
                    </td>
                </tr>
                contador++;
            }
        </tbody>
    </table>

    <div class="col-md-12">
        <button class="btn btn_beta" onclick="RegistrarCapturaMovimientoInventarioRecepcion();">Confirmar</button>
    </div>
}
else
{
    <h2 class="text-center" style="color:red">NO SE ENCONTRÓ LA ORDEN DE COMPRA O YA SE RECIBIÓ</h2>
    <br />
    <label>@ViewBag.ex_msj</label>
}

<script>
    $(window).on("load", function () {
        CaracteresControl();
    });

    function isNumberOrDecimalKey(evt, unidad) {
        var charCode = (evt.which) ? evt.which : event.keyCode;
        //UNIDAD 1 DECIMAL
        //UNIDAD 0 ENTERO
        if (unidad == 1) {
            // Allow only numbers and a single decimal point
            if (charCode > 31 && (charCode < 48 || charCode > 57) && charCode !== 46) {
                return false;
            }

            // Allow only one decimal point
            var input = evt.target.value;
            if (input.indexOf('.') !== -1 && charCode === 46) {
                return false;
            }

            return true;
        }
        else {
            // Allow only numbers and a single decimal point
            if (charCode > 31 && (charCode < 48 || charCode > 57)) {
                return false;
            }

            return true;
        }


    }
</script>