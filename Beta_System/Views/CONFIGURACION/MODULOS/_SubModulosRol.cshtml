@model IEnumerable<Beta_System.Models.C_modulos_sub>

<div class="col-md-3">
    <strong>Seleccionar/Quitar todos</strong>
    <button class="btn btn_beta_icon" onclick="SeleccionarAllModulos();"><i class="fa fa-check"></i></button>
</div>

<div class="table-responsive">
    <table class="table table-striped table-bordered">
        @foreach (var modulo in Model.OrderBy(x => x.C_modulos.nombre).GroupBy(x => x.C_modulos))
        {
            <tr>
                <th colspan="2" class="bg-beta text-white"><strong>@modulo.Key.nombre</strong></th>
            </tr>
            foreach (var sub in modulo.OrderBy(x => x.nombre))
            {
                <tr>
                    <td>@sub.nombre</td>
                    <td><input type="checkbox" id="@sub.id_modulos_sub" class="form-control check_submodulo" style="height:20px;" /></td>
                </tr>
            }
        }
    </table>
</div>

<script>
    var modo = true;
    function SeleccionarAllModulos() {
        modo = !modo;
        $(".check_submodulo").prop("checked", modo);
    }
</script>