
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/MainLayout.cshtml";
}


<div class="page_title">
    <div class="counter_section">
        <h1>Asignador de permisos a usuarios</h1>
        <div class="row">
            <div class="col-md-4 text-left">
                <strong>Usuario:</strong>
                <br />
                <select class="form-control" id="id_usuario_select" onchange="ConsultarPermisosUsuario();">
                    @{ Html.RenderAction("ConsultarUsuariosCorporativoSelect", "USUARIOS"); }
                </select>
            </div>
            <div class="col-md-3">
                <strong>Módulo:</strong>
                <select class="form-control" id="id_modulo" onchange="ConsultarSubModulosModuloSelect(); ConsultarPermisosUsuario();">
                    @{ Html.RenderAction("ConsultarModulosSelect", "MODULOS"); }
                </select>
            </div>
            <div class="col-md-4">
                <strong>Sub módulo:</strong>
                <select class="form-control" id="id_submodulo" onchange="ConsultarPermisosUsuario();">
                </select>
            </div>
        </div>
        <br />
        <hr />
        <div class="table-responsive">
            <div id="div_permisos_usuario">

            </div>
        </div>
        <br />
        <button class="btn btn_beta" onclick="AsignarPermisosUsuario();">Asignar permisos</button>
        <button class="btn btn_beta_danger" onclick="RemoverPermisosUsuario();">Remover permisos</button>

    </div>

</div>


@Scripts.Render("~/bundles_Permiso/js")
@Scripts.Render("~/bundles_Modulo/js")

<script>

    $(window).on("load", function () {
        ConsultarSubModulosModuloSelect();
    });

    try {
        $("#id_usuario_select").select2({
            placeholder: 'Selecciona un usuario',
            //dropdownParent: $("#tabulador")
        });
    }
    catch (ex) { }
</script>