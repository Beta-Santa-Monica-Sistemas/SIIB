@model List<Beta_System.Models.C_bascula_fichas>
@if (Model.Count() > 0)
{
    string[] monedas = new string[] { "MXN", "USD" };
    int[] id_monedas = new int[] { 1, 39118 };
    <table class="table  table-striped table-bordered" id="datatable_fichas_recepcion_facturas">
        <thead>
            <tr class="bg-beta text-center">
                <th>Establo</th>
                <th>Ficha</th>
                <th>Fecha</th>
                <th style="width:300px;">Proveedor</th>
                <th style="width:300px;">Alimento</th>
                @*<th>Calidad</th>*@
                <th>Observaciones</th>
                <th>Toneladas</th>
                <th>Tons. factura</th>
                <th>Precio unitario</th>
                <th>Moneda</th>
                <th>Selección</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                decimal toneladas_ficha = (decimal)item.peso_t / 1000;
                decimal toneladas_forma = Math.Round(toneladas_ficha, 3);
                decimal precio = 0;
                var valid_precio = item.C_articulos_catalogo.C_alimentacion_articulos_precios.FirstOrDefault();
                if (valid_precio != null)
                {
                    precio = (decimal)valid_precio.precio_articulo;
                }
                <tr class="text-center" id="id_row_seleccion_factura_@item.id_bascula_ficha">
                    <td id="establo_facturas_@item.id_bascula_ficha">@item.C_establos.siglas</td>
                    <td id="id_ficha_facturas_@item.id_bascula_ficha">@item.id_bascula_ficha</td>
                    <td id="fecha_facturas_@item.id_bascula_ficha">@string.Format(item.fecha_registo.Value.ToShortDateString(), "dd/MM/yyyy")</td>
                    <td id="prov_facturas_@item.id_bascula_ficha" class="text-left" style="width:300px;">@item.C_compras_proveedores.razon_social <strong>(@item.C_compras_proveedores.C_tipos_moneda.clave_fiscal)</strong></td>
                    <td id="art_facturas_@item.id_bascula_ficha" class="text-left" style="width:300px;">@item.C_articulos_catalogo.nombre_articulo</td>
                    @*<td>@item.</td>*@
                    <td id="obs_facturas_@item.id_bascula_ficha">@item.observaciones</td>
                    <td>@toneladas_ficha</td>
                    <td>
                        <input type="number" value="@toneladas_forma" class="form-control toneladas_ficha_facturas" id="toneladas_facturas_@item.id_bascula_ficha" />
                    </td>
                    <td>
                        <input type="number" value="@precio" class="form-control precios_ficha_facturas" id="precios_facturas_@item.id_bascula_ficha" />
                    </td>
                    <td>
                        <select class="form-control" id="id_moneda_facturas_@item.id_bascula_ficha" style="height:auto !important;">
                            @for (int i = 0; i < monedas.Length; i++)
                            {
                                if (item.C_compras_proveedores.id_tipo_moneda == id_monedas[i])
                                {
                                    <option value="@id_monedas[i]" selected>@monedas[i]</option>
                                }
                                else
                                {
                                    <option value="@id_monedas[i]">@monedas[i]</option>
                                }
                            }
                            @*<option value="1">MXN</option>
                                <option value="39118">USD</option>*@
                        </select>
                    </td>
                    <td>
                        <input type="number" value="@item.id_compras_proveedor" id="prov_ficha_recepcion_factura_@item.id_bascula_ficha" style="display:none;" />
                        <input type="checkbox" name="seleccion_recepcion_factura" id="check_seleccion_factura_@item.id_bascula_ficha" value="@item.id_bascula_ficha" class="form-control" style="height:25px; min-height:25px;" onchange="SeleccionarFilaFacturas(@item.id_bascula_ficha);" />
                    </td>
                </tr>
            }
        </tbody>
    </table>
}
else
{
    <h3 class="text-danger text-center">No se encontraron fichas</h3>
}