@model List<Beta_System.Models.C_alimentacion_dietas_g>

@if (Model.Count() > 0)
{
    int id_status = ViewBag.id_status;

    <script>
        try {
            $("#datatableDietas_@id_status").dataTable().fnDestroy();
        } catch (e) { }
    </script>

    <table class="table table-striped table-bordered" id="datatableDietas_@id_status">
        <thead>
            <tr class="bg-beta text-center">
                <th>Establo</th>
                <th>Fecha registro</th>
                <th>Tipo</th>
                <th>Grupo</th>
                <th>Dieta</th>
                <th>Descripción</th>
                <th>Inicio real</th>
                <th>Fin planeado</th>
                @if (id_status == 1)
                {
                    <th>Editar</th>
                }
                @if (id_status == 2)
                {
                    <th>Autorizar</th>
                }
                @if (id_status == 3)
                {
                    <th>Aplicar</th>
                }
                @if (id_status == 4 || id_status == 5)
                {
                    <th>Mostrar</th>
                }
                @if (id_status == 6)
                {
                    <th>Revisar</th>
                }
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr class="text-center">
                    <td>@item.C_establos.siglas</td>
                    <td>@string.Format(item.fecha_registro.Value.ToShortDateString(), "dd/MM/yyyy")</td>
                    <td>@item.C_alimentacion_dietas_grupos.C_alimentacion_dietas_grupos_tipos.nombre_grupo_tipo</td>
                    <td>@item.C_alimentacion_dietas_grupos.nombre_grupo</td>

                    <td>@item.nombre</td>
                    <td>@item.descripcion</td>
                    <td><label>@string.Format(item.fecha_inicio.Value.ToShortDateString(), "dd/MM/yyyy")</label></td>
                    <td><label>@string.Format(item.fecha_fin.Value.ToShortDateString(), "dd/MM/yyyy")</label></td>
                    @if (id_status == 1)
                    {
                        <td>
                            <button class="btn btn_beta_icon" onclick="ConsultarDietaDetalle(@item.id_dieta_g, @id_status);"><i class="fa fa-edit"></i></button>
                        </td>
                    }
                    @if (id_status == 2 || id_status == 3 || id_status == 4 || id_status == 6)
                    {
                        <td>
                            <button class="btn btn_beta_icon" onclick="ConsultarDietaDetalle(@item.id_dieta_g, @id_status);"><i class="fa fa-bars"></i></button>
                        </td>
                    }

                </tr>
            }
        </tbody>
    </table>

    <script>
        $('#datatableDietas_@id_status').DataTable({
            keys: false,
            ordering: true,
            searching: false,
            paging: false,
            dom: "Bfrtip",
            buttons: [{
                extend: "copy",
                className: "btn-sm",
                columns: ':visible'
            }, {
                extend: "csv",
                className: "btn-sm"
            }, {
                extend: "excel",
                className: "btn-sm"
            }, {
                extend: "pdf",
                className: "btn-sm"
            }, {
                extend: "print",
                className: "btn-sm"
            }],
            responsive: false,
            select: true
        });
    </script>

}
else
{
    <h3 class="text-danger text-center">NO SE ENCONTRARON REGISTROS</h3>
}

