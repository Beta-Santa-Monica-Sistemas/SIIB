@model List<Beta_System.Models.Tracker.KardexIngredientes>

@if (Model.Count() > 0)
{
    decimal saldo = 0;
    <table class="table table-striped table-bordered " id="datatable_kardex_ingredientes">
        <thead>
            <tr class="text-center bg-beta">
                <th>Fecha</th>
                <th>Compra</th>
                <th>Transferencia</th>
                <th>Ajuste</th>
                <th>Consumo</th>
                <th>Saldo</th>
            </tr>

        </thead>
        <tbody>
            <tr class="bg-green text-center">
                <td>@ViewBag.nombre_ing</td>
                <td><strong>@ViewBag.fecha_inicio</strong></td>
                <td></td>
                <td></td>
                <td><strong>@ViewBag.fecha_fin</strong></td>
                <td></td>
            </tr>
            @foreach (var item in Model.GroupBy(x => x.Fecha))
            {
                decimal consumo = item.Sum(x => x.Consumo);
                decimal compra = item.Sum(x => x.Compra);
                decimal trasnfer = item.Sum(x => x.Transferencia);

                saldo = saldo + compra;
                saldo = saldo - consumo;
                saldo = saldo - trasnfer;

                <tr>
                    <td>@item.FirstOrDefault().Fecha</td>

                    <td>@compra.ToString("N2")</td>

                    <td>@trasnfer.ToString("N2")</td>

                    <td>0</td>

                    <td>@consumo.ToString("N2")</td>

                    <td>@saldo.ToString("N2")</td>

                </tr>
            }
        </tbody>
    </table>
}
else
{
    <h4 class="text-center">No se encontró información</h4>
}


