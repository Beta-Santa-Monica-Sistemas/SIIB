@model List<Beta_System.Models.C_evaluaciones_departamentos>

@if (Model.Count() > 0)
{
    <table class="table table-striped table-bordered" id="datatable_departamentos">
        <thead>
            <tr class="bg-beta text-center">
                <th>Departamento</th>
                <th>Empleados</th>
                <th>Evaluadores</th>
                <th>Estatus</th>
                <th>Editar departamento</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        <div class="text-center">
                            <strong>@item.nombre_departamento</strong>
                        </div>
                    </td>
                    <td>
                        <div class="row">
                            <div class="col-md-8">
                                <div class="row">
                                    @foreach (var emp in item.C_evaluaciones_departamentos_empleados.Where(x => x.activo == true))
                                    {
                                        <div class="col-md-5">
                                            <label>-@emp.C_nomina_empleados.Nombres @emp.C_nomina_empleados.Apellido_paterno</label>
                                        </div>
                                    }
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="text-center mt-2"><a href="#" onclick="ConsultarDepartamentosEmpleadosTable(@item.id_evaluacion_departamento, '@item.nombre_departamento');">Modificar +</a></div>
                            </div>
                        </div>
                    </td>

                    <td class="text-center">
                        <div class="text-center mt-2"><a href="#" onclick="ConsultarDepartamentosUsuariosTable(@item.id_evaluacion_departamento, '@item.nombre_departamento');">Modificar +</a></div>
                        @foreach (var us in item.C_evaluaciones_departamentos_usuarios.Where(x => x.activo == true))
                        {
                            <label>@us.C_usuarios_corporativo.usuario</label>
                        }
                    </td>

                    <td class="text-center">
                        @if (item.activo == true)
                        {
                            <i onclick="OnOffDepartamento(@item.id_evaluacion_departamento, false);" class="fa fa-2x fa-toggle-on" style="color: lightgreen; cursor:pointer;"></i>
                        }
                        else
                        {
                            <i onclick="OnOffDepartamento(@item.id_evaluacion_departamento, true);" class="fa fa-2x fa-toggle-on" style="color: lightgrey; cursor: pointer;"></i>
                        }
                    </td>
                    <td class="text-center">
                        <button class="btn btn_beta" onclick="AddEditDepartamento(2,@item.id_evaluacion_departamento,'@item.nombre_departamento');"><i class="fa fa-edit"></i></button>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}