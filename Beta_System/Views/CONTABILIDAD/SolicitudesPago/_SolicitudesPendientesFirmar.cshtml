@model IEnumerable<Beta_System.Models.C_contabilidad_solicitudes_pago_g>

@if (Model.Count() > 0)
{
    int modo = ViewBag.modo;
    List<int> permisos = Session["PermisosModulo"] as List<int>;

    <table class="table table-striped table-bordered">
        <thead>
            <tr class="bg-beta text-center">
                <th>Folio</th>
                <th>Fecha de registro</th>
                <th>Usuario registro</th>
                <th>Cuenta origen</th>
                <th>Importe</th>
                <th>Moneda</th>
                <th>Referencia</th>
                <th>Estatus</th>
                <th>Mostrar</th>
                @if (modo == 3)
                {
                    if (permisos.Contains(4022)) { <th>Modificar</th> }
                    if (permisos.Contains(4021))
                    {
                        <th>Generar TXT interbancario</th>
                        <th>Generar TXT Terceros</th>
                    }
                    if (permisos.Contains(4023)) { <th>Eliminar</th> }
                }
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr class="text-center">
                    <td>@item.id_solicitud_pago_g</td>
                    <td>@string.Format(item.fecha_registro.ToString(), "dd/mm/yyyy HH:mm")</td>
                    <td>@item.C_usuarios_corporativo.usuario | @item.C_usuarios_corporativo.C_empleados.nombres @item.C_usuarios_corporativo.C_empleados.apellido_paterno</td>
                    <td>@item.numero_cuenta</td>
                    <td>@item.importe</td>
                    <td>@item.moneda_clave_fiscal</td>
                    <td>@item.referencia</td>
                    <td>
                        <button class="btn" style="background-color:@item.C_contabilidad_solicitudes_pago_status.color; color:white;">@item.C_contabilidad_solicitudes_pago_status.nombre_status</button>
                    </td>
                    <td>
                        @if (modo == 1)
                        { //VALIDAR
                            <button class="btn btn_beta_icon" onclick="ConsultarSolicitudPagoDetalle(@modo, @item.id_solicitud_pago_g);"><i class="fa fa-bars"></i></button>
                        }
                        @if (modo == 2)
                        { //AUTORIZAR
                            <button class="btn btn_beta_icon" onclick="ConsultarSolicitudPagoDetalle(@modo, @item.id_solicitud_pago_g);"><i class="fa fa-bars"></i></button>
                        }
                        @if (modo == 3)
                        { //TERMINADA
                            <button class="btn btn_beta_icon" onclick="ConsultarSolicitudPagoDetalle(@modo, @item.id_solicitud_pago_g);"><i class="fa fa-bars"></i></button>
                        }
                    </td>
                    @if (modo == 3)
                    {
                        if (permisos.Contains(4022))
                        {
                            <td><button class="btn btn_beta_icon" onclick="ConsultarSolicitudPagoDetalle(2, @item.id_solicitud_pago_g);"><i class="fa fa-edit"></i></button></td>
                        }

                        if (permisos.Contains(4021))
                        {
                            <td><button class="btn btn_beta_icon" onclick="GenerarTXTInterbancarioSolicitudPago(@item.id_solicitud_pago_g);"><i class="fa fa-file-text"></i></button></td>
                            <td><button class="btn btn_beta_icon" onclick="GenerarTXTTercerosSolicitudPago(@item.id_solicitud_pago_g);"><i class="fa fa-file-text"></i></button></td>
                        }

                        if (permisos.Contains(4023))
                        {
                            <td><button class="btn btn_beta_icon btn_beta_danger" onclick="EliminarSolicitudPago(@item.id_solicitud_pago_g);"><i class="fa fa-remove"></i></button></td>
                        }
                    }
                </tr>
            }
        </tbody>
    </table>

}

