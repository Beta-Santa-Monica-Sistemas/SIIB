@model List<Beta_System.Models.SolicitudPagoDetalleMS>

@if (Model != null)
{
    decimal importe_total = 0;
    <div class="table-responsive">
        <table class="table table-striped table-bordered">
            <thead>
                <tr class="bg-beta">
                    <th>Fecha</th>
                    <th>Referencia</th>
                    <th>Beneficiario</th>
                    <th>Tipo persona</th>
                    <th>Importe</th>
                    <th>Moneda</th>
                    <th>Descripción</th>
                    <th>Cuenta</th>
                    <th>Selección</th>

                    <th style="display:none;">DATOS</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    importe_total += Convert.ToDecimal(item.importe);
                    <tr>
                        <td>@item.fecha_ba</td>
                        <td>@item.referencia</td>
                        <td>@item.beneficiario_nombre</td>
                        <td>@item.prov_tipo_persona</td>
                        <td>@string.Format("{0:C}", Convert.ToDecimal(item.importe))</td>
                        <td>@item.moneda_nombre</td>
                        <td>@item.descripcion</td>
                        <td>@item.prov_cuenta_bancaria</td>
                        <td class="text-center">
                            <input type="checkbox" style="height:20px;min-height:20px;" class="form-control check_pago" checked="checked"
                                   value="@item.id_docto_ba" name="doctoCP_@item.id_docto_cp" onclick="CalcularImporteTotal(1);" />
                        </td>

                        <td style="display:none;">
                            <input type="text" class="conceptos" id="conceptoID_@item.id_docto_ba" name="concepto_@item.nombre_concepto" value="@item.id_concepto_ba" />
                            <input type="text" class="monedas" id="monedaID_@item.id_docto_ba" name="moneda_@item.moneda_clave_fiscal" value="@item.moneda_id" />
                            <input type="text" class="beneficiarios" id="beneficiarioID_@item.id_docto_ba" name="beneficiario_@item.beneficiario_nombre" value="@item.beneficiario_id" />
                            <input type="text" class="datosFiscales" id="datosFiscales_@item.id_docto_ba" name="datosFiscales_@item.prov_tipo_persona" value="@item.prov_cuenta_bancaria" />
                            <input type="text" class="datosBA" id="datosBA_@item.id_docto_ba" name="datosBA_@item.fecha_ba" value="@item.referencia" />
                            <input type="text" class="importes" id="importes_@item.id_docto_ba" name="importes_@item.descripcion" value="@item.importe" />
                            <input type="text" class="proveedor" id="provPF_@item.id_docto_ba" value="@item.prov_nombre_pf" />
                        </td>


                    </tr>
                }
            </tbody>
        </table>
    </div>
    <h3>Importe total: $<strong id="lbl_total_importe">@importe_total.ToString("N2")</strong></h3>
    <hr />
    <div class="row">
        <div class="col-md-3">
            <strong>Fecha solicitud</strong>
            <input type="date" class="form-control" id="fecha_solicitud_pago" />
        </div>
        <div class="col-md-3">
            <strong>Referencia</strong>
            <input type="text" class="form-control" id="referencia_solicitud_pago" value="@ViewBag.referencia" />
        </div>
        <div class="col-md-3">
            <strong>Cuenta origen</strong>
            <input type="text" class="form-control" id="cuenta_origen_solicitud_pago" value="@ViewBag.ultima_cuenta" />
        </div>
        <div class="col-md-3">
            <br />
            <button class="btn btn_beta" onclick="GuardarSolicitudPagos();">GUARDAR</button>
        </div>
    </div>
}
else
{
    <h2 class="text-danger">Ocurrió un problema al generar la consulta</h2>
}