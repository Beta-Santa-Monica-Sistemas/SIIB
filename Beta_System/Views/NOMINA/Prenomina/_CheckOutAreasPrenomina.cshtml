@model IEnumerable<Beta_System.Models.C_nomina_beta_d_areas>

@{
    int status = ViewBag.status;
    List<Beta_System.Models.C_usuarios_areas_nomina> areas_usuario_sesion = Session["AreasUsuarioSesion"] as List<Beta_System.Models.C_usuarios_areas_nomina>;
    string establo = ViewBag.nombre_establo;
    DateTime fecha_inicio = ViewBag.fecha_inicio;
    DateTime fecha_fin = ViewBag.fecha_fin;
    int no_semana = ViewBag.no_semana;

    if (Model == null || Model.Count() <= 0)
    {
        if (status == 3)
        {
            <h2 class="text-danger text-center">NÓMINA ACTUAL CERRADA</h2>
        }
        else if (status == 1)  //ES NUEVA NOMINA DE LA SEMANA
        {
            <h3 style="margin:0px;" class="text-center text-success">NUEVA PRENÓMINA</h3>
            <div class="row">
                <div class="col-md-8">
                    <h2 style="margin:0px;" class="text_beta">@establo</h2>
                    <h3 style="margin:0px;">SEMANA: #@no_semana</h3>
                </div>
                <div class="col-md-4 text-right">
                    <h3 style="margin:0px;">Del: <label class="text_beta">@string.Format(fecha_inicio.ToShortDateString(), "dd/mm/yyyy")</label></h3>
                    <h3 style="margin:0px;">al: <label class="text_beta">@string.Format(fecha_fin.ToShortDateString(), "dd/mm/yyyy")</label></h3>
                </div>
            </div>
            <div class="table-responsive" style="height: 400px; min-height:400px; overflow:scroll; overflow-x:hidden;">
                <table class="table table-striped table-bordered">
                    <tr class="text-center bg-beta">
                        <th>AREA</th>
                        <th>GENERAR</th>
                    </tr>
                    @foreach (var item in areas_usuario_sesion.Select(x => x.C_nomina_departamentos))
                    {
                        <tr class="text-center">
                            <td>@item.nombre_departamento</td>
                            <td>
                                <input type="checkbox" name="checkout_area_check" value="@item.id_departamento_empleado" checked class="form-control" style="height:25px;" />
                            </td>
                        </tr>
                    }
                </table>
            </div>
            <div class="row">
                <div class="col-md-6 text-left">
                    <button class="btn btn_beta_warning" onclick="GenerarPrenominaBeta();">Generar prenomina</button>
                </div>
                <div class="col-md-6 text-right">
                    @*<button type="button" class="btn btn_beta_danger" data-dismiss="modal">Cerrar</button>*@
                </div>
            </div>
        }
        else
        {
            <h2 class="text-danger text-center">OCURRIÓ UN ERROR</h2>
        }

    }
    else
    {
        <h3 style="margin:0px;" class="text-center text-warning">RECALCULAR PRENOMINA</h3>
        <div class="row">
            <div class="col-md-8 text-left">
                <h2 style="margin:0px;" class="text_beta">@Model.FirstOrDefault().C_nomina_beta_g.C_establos.nombre_establo</h2>
                <h3 style="margin:0px;">@Model.FirstOrDefault().C_nomina_beta_g.nombre_nomina</h3>
            </div>
            <div class="col-md-4 text-right">
                <strong>Del: <label class="text_beta">@string.Format(Model.FirstOrDefault().C_nomina_beta_g.fecha_inicio.Value.ToShortDateString(), "dd/mm/yyyy")</label></strong><br />
                <strong>al: <label class="text_beta">@string.Format(Model.FirstOrDefault().C_nomina_beta_g.fecha_fin.Value.ToShortDateString(), "dd/mm/yyyy")</label></strong>
            </div>
        </div>
        <div class="table-responsive" style="height: 400px; min-height:400px; overflow:scroll; overflow-x:hidden;">
            <table class="table table-striped table-bordered">
                <tr class="text_beta text-center">
                    <th>Área</th>
                    <th>Generar</th>
                </tr>
                @foreach (var item in areas_usuario_sesion.Select(x => x.C_nomina_departamentos))
                {
                    <tr>
                        <td>@item.nombre_departamento</td>
                        <td class="text-center">
                            @if (Model.Select(x => x.id_departamento).Contains(item.id_departamento_empleado))
                            {
                                string gola = "";
                                <strong class="text-success">Generada <i class="fa fa-check-circle"></i></strong>
                            }
                            else
                            {
                                <input type="checkbox" name="checkout_area_check" value="@item.id_departamento_empleado" checked class="form-control" style="height:25px;" />
                            }
                        </td>
                    </tr>
                }
            </table>
        </div>
        <div class="row">
            <div class="col-md-6 text-left">
                <button class="btn btn_beta_warning" onclick="GenerarPrenominaBeta();">Generar prenomina</button>
            </div>
            <div class="col-md-6 text-right">
                @*<button type="button" class="btn btn_beta_danger" data-dismiss="modal">Cerrar</button>*@
            </div>
        </div>

    }

}









