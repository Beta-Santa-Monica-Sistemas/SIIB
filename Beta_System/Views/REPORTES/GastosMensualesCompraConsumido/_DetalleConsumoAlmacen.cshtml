@model IEnumerable<Beta_System.Models.C_almacen_solicitudes_mercancia_d>

@{
    decimal importe = 0;
}

@if (Model.Count() > 0)
{
    <div class="row">
        <div class="col-md-6">
            <h4 style="margin:3px;"><strong>@Model.FirstOrDefault().C_cargos_contables_g.nombre_cargo</strong></h4>
            <h4 style="margin:3px;"><label>@Model.FirstOrDefault().C_cuentas_contables_g.cuenta      @Model.FirstOrDefault().C_cuentas_contables_g.nombre_cuenta</label></h4>
        </div>
        <div class="col-md-6 text-right">
            <h4><strong>Importe consumo almacen: $ @Model.Select(x => x.cantidad_entregada * x.costo).Sum().Value.ToString("N2")</strong></h4>
        </div>
    </div>

    <div class="table-responsive" style="height: 500px; overflow:scroll; overflow-x:hidden;">
        <table class="table table-striped table-bordered" id="datatable_consumo_almacen_detalle">
            <thead>
                <tr class="bg-beta text-center">
                    <th>Almacén</th>
                    <th>Folio</th>
                    <th>Fecha</th>
                    <th style="width:30%;">Artiículo</th>
                    <th>Descripción</th>
                    <th>Unidad</th>
                    <th>Precio</th>
                    <th>Cantidad</th>
                    <th>Importe $</th>
                    <th>Usuario registra</th>
                    <th>Id</th>
                    <th>Equipo</th>
                    <th>Cargo</th>
                    <th>Cuenta</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    importe = (decimal)item.costo * (decimal)item.cantidad_entregada;
                    <tr class="text-center">
                        <td>@item.C_almacen_solicitudes_mercancia_g.C_almacen_almacenes_g.siglas</td>
                        <td>@item.id_solicitud_mercancia_g</td>
                        <td>@string.Format(item.C_almacen_solicitudes_mercancia_g.fecha_registro.Value.ToShortDateString(), "dd/mm/yyyy")</td>
                        <td>@item.C_articulos_catalogo.clave</td>
                        <td class="text-left">@item.C_articulos_catalogo.nombre_articulo</td>
                        <td>@item.C_unidades_medidas.unidad_medida</td>
                        <td>@item.costo.Value.ToString("N2")</td>
                        <td>@item.cantidad_entregada</td>
                        <td>$@importe.ToString("N2")</td>
                        <td>@item.C_almacen_solicitudes_mercancia_g.C_empleados.nombres.ToUpper() @item.C_almacen_solicitudes_mercancia_g.C_empleados.apellido_paterno.ToUpper()</td>
                        <td>@item.C_almacen_solicitudes_mercancia_g.C_establos_equipos.clave_equipo</td>
                        <td>@item.C_almacen_solicitudes_mercancia_g.C_establos_equipos.nombre_equipo</td>
                        <td>@item.C_cargos_contables_g.nombre_cargo</td>
                        <th>@item.C_cuentas_contables_g.cuenta @item.C_cuentas_contables_g.nombre_cuenta</th>
                    </tr>
                }
            </tbody>
        </table>
    </div>
    

}

